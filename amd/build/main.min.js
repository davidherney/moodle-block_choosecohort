define(["jquery","core/modal_factory","core/templates","core/notification"],function(o,e,n,t){var c=M.cfg.wwwroot,r=null;e.create({body:""}).then(function(o){r=o,o.getModal().addClass("block_choosecohort-modal")});return{init:function(){o(".block_choosecohort").each(function(e,n){var t=o(this),i=t.find('[data-control="search-text"]');$errorbox=t.find('[data-control="errors-box"]');var a=function(){var o=i.val();t.find(".choosecohort-content .one-cohort").hide(),t.find(".one-cohort :contains('"+o+"')").parents(".one-cohort").show()};t.find('[data-control="search-button"]').on("click",function(){a()}),i.on("keypress",function(o){if(o.keyCode)switch(o.keyCode){case 13:o.preventDefault()}}),i.on("keyup",function(o){(o.keyCode&&-1==[13,16,17,18,27,33,34,35,36,37,38,39,45,144].indexOf(o.keyCode)||13===o.keyCode)&&a()}),t.find('[type="checkbox"]').change(function(){o.get(c+"/blocks/choosecohort/choose.php?idnumber="+o(this).val())}),t.find('[data-control="view-detail"]').on("click",function(){var e=o(this).parents(".one-cohort");r.setBody(e.find(".one-description").html()),r.show()})})}}});